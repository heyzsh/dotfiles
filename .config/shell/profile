#!/bin/sh

# ======================
# home dir organization
# ======================

! [ -d "$HOME/.config" ]              && mkdir "$HOME/.config"
! [ -d "$HOME/.local/bin" ]           && mkdir -p "$HOME/.local/bin"
! [ -d "$HOME/.local/share" ]         && mkdir -p "$HOME/.local/share"
! [ -d "$HOME/.local/backgrounds" ]   && mkdir -p "$HOME/.local/backgrounds"
! [ -d "$HOME/.cache" ]               && mkdir "$HOME/.cache"
! [ -d "$HOME/github" ]               && mkdir "$HOME/github"

export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_CACHE_HOME="$HOME/.cache"

export ZDOTDIR="${XDG_CONFIG_HOME:-$HOME/.config}/zsh"
export GTK2_RC_FILES="${XDG_CONFIG_HOME:-$HOME/.config}/gtk-2.0/gtkrc-2.0"
export LESSHISTFILE="-"
export WGETRC="${XDG_CONFIG_HOME:-$HOME/.config}/wget/wgetrc"
export PASSWORD_STORE_DIR="${XDG_DATA_HOME:-$HOME/.local/share}/password-store"
export HISTFILE="${XDG_DATA_HOME:-$HOME/.local/share}/history"
export GNUPGHOME="${XDG_DATA_HOME:-$HOME/.local/share}/gnupg"
export CARGO_HOME="${XDG_DATA_HOME:-$HOME/.local/share}/cargo"

# it's causing an issue for some reason, needs to be reported
# export ALSA_CONFIG_PATH="${XDG_CONFIG_HOME:-$HOME/.config}/alsa/asoundrc"


# ====================
# preferrerd programs
# ====================

export BROWSER="/usr/bin/firefox"
export DOCUMENT_VIEWER="/usr/bin/zathura"
export EDITOR="/usr/bin/nvim"
export FILE_MANAGER="/usr/bin/lf"
export IMAGE_EDITOR="/usr/bin/gimp"
export IMAGE_VIEWER="/usr/bin/sxiv"
export MAIL="/usr/bin/mutt"
export PLAYER="/usr/bin/mpv"
export TERMINAL="/usr/bin/alacritty"

# ===============
# custom scripts
# ===============

export PATH=$PATH:/home/$USER/.local/bin

# =========
# go paths
# =========

export GOPATH="${HOME}/github/go"
export GOBIN="${HOME}/github/go/bin"
export PATH=$PATH:$GOBIN

# ===
# fzf
# ===

export FZF_DEFAULT_OPTS="--layout=reverse --height 60%"

# ==
# qt
# ==

export QT_QPA_PLATFORMTHEME="gtk2"

# =======
# firefox
# =======

# smooth scrolling
export MOZ_USE_XINPUT2="1"
export MOZ_ENABLE_WAYLAND=1

# ====
# java
# ====

export _JAVA_AWT_WM_NONREPARENTING=1

#---------#
# wayland #
#---------#
export GDK_BACKEND=wayland

if test -z "${XDG_RUNTIME_DIR}"; then
    export XDG_RUNTIME_DIR=/tmp/${UID}-runtime-dir
    if ! test -d "${XDG_RUNTIME_DIR}"; then
        mkdir "${XDG_RUNTIME_DIR}"
        chmod 0700 "${XDG_RUNTIME_DIR}"
    fi
fi
