#!/bin/sh

DEMOJI_PATH="${HOME}/.local/share/demojis"
sel=

if [ "$XDG_SESSION_TYPE" = "wayland" ]; then
  ! [ -x $(command -v bemenu) ] && echo "bemenu not installed" && exit 1
  ! [ -x $(command -v wl-copy) ] && echo "wl-copy not installed" && exit 1
  sel=$(awk '{ print $1 }' $DEMOJI_PATH | bemenu -p "emoji:")
  wl-copy $( grep "$sel" "$DEMOJI_PATH" | awk '{ print $2 }' )
else 
  ! [ -x $(command -v dmenu) ] && echo "dmenu not installed" && exit 1
  ! [ -x $(command -v xclip) ] && echo "xclip not installed" && exit 1
  sel=$(awk '{ print $1 }' $DEMOJI_PATH | dmenu -l -p "emoji:")
  grep "$sel" "$DEMOJI_PATH" | awk '{ print $2 }' | xclip -selection c
fi

notify-send "Emoji copied" "$sel copied to clipboard" > /dev/null
