#!/bin/sh

#-------------------------------------------------------------------#
# SYNCHRONIZES PORTAGE AND KERNEL CONFIG WITH THE GITHUB REPOSITORY #
#-------------------------------------------------------------------#
HOME="/home/hey"
GIT_DIR="${HOME}/github/veryretro"

SYSTEM_BAK_DIR="${HOME}/.local/share/root"
mkdir -p "$SYSTEM_BAK_DIR"

CRON_BAK_DIR="${SYSTEM_BAK_DIR}/var/spool"
mkdir -p "$CRON_BAK_DIR"
cp -prf /var/spool/cron/* "$CRON_BAK_DIR"

cp -rf "${HOME}/.ssh" /root/
git --git-dir="$GIT_DIR" --work-tree="$HOME" add "${CRON_BAK_DIR}/*"
git --git-dir="$GIT_DIR" --work-tree="$HOME" commit -m "updated system configuration"
git --git-dir="$GIT_DIR" --work-tree="$HOME" push

notify-send "î—¼ Config" "System config files synced"
